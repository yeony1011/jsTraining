<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div class="wrap_random">
    <div class="box_random">
      <div class="item1">a</div>
      <div class="item2">b</div>
      <div class="item3">c</div>
      <div class="item4">d</div>
      <div class="item5">e</div>
    </div>
    <button type="button" class="btn_random">랜덤버튼</button>
  </div>
  <script>
    const App = {
      // 초기 저장할 변수 세팅
      boxRandom: null,
      btnRandom: null,
      itemsArr: [], // NodeList 가 아닌, 순수 배열로 저장해둘 공간

      // 랜덤 출력
      setRandom: function(){
        const randomArr = this.itemsArr.sort(() => Math.random() - 0.5);

        // AS-IS
        // randomArr.forEach((element) => {
        //   this.boxRandom.appendChild(element);
        // });

        // TO-BE
        // DocumentFragment 생성( 가상의 빈 껍데기 )
        // fragment에 요소를 차곡차곡 담고 ( 실제 화면이 변하지 않음 )
        // 완성된 fragment를 실제 화면에 한번에 출력
        const fragment = document.createDocumentFragment();
        randomArr.forEach((element) => {
          fragment.appendChild(element);
        });
        this.boxRandom.appendChild(fragment);
      },

      // 이벤트 연결
      bindEvents: function(){
        this.btnRandom.addEventListener('click', () => {
          this.setRandom();
        });
      },

      // 로드시 초기 세팅
      init: function(){
        this.boxRandom = document.querySelector('.box_random');
        this.btnRandom = document.querySelector('.btn_random');
        this.item = this.boxRandom.querySelectorAll('div');

        // 처음 한번만 요소를 찾아 배열로 변환해 저장해둠
        // Array.from() : NodeList를 진짜 배열로 바꿔주는 문법
        const nodeList = this.boxRandom.querySelectorAll('div');
        this.itemsArr = Array.from(nodeList);

        this.setRandom();
        this.bindEvents();
      }
    };

    App.init();
  </script>
</body>
</html>